<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración - PetZone</title>
    <link rel="stylesheet" href="css/dashboard.css">
    <link href="https://fonts.googleapis.com/css2?family=Material+Icons&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <script src="https://code.highcharts.com/highcharts.js" defer></script>
    <script src="https://code.highcharts.com/modules/exporting.js" defer></script>
    <script src="https://code.highcharts.com/modules/export-data.js" defer></script>
    <script src="https://code.highcharts.com/modules/accessibility.js" defer></script>
</head>

<body>
    <!-- PANTALLA DE LOGIN -->
    <div class="login-screen" id="loginScreen">
        <div class="login-container">
            <div class="login-logo">
                <img src="img/Logo.png" alt="PetZone Logo" class="login-logo-img">
                <div class="login-text">
                    <h1>PetZone</h1>
                    <p>Panel de Administración</p>
                </div>
            </div>

            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="username">Usuario</label>
                    <input type="text" id="username" placeholder="Ingrese su usuario" required>
                </div>
                <div class="form-group">
                    <label for="password">Contraseña</label>
                    <input type="password" id="password" placeholder="Ingrese su contraseña" required>
                </div>
                <button type="submit" class="login-btn">
                    <span class="material-icons">login</span>
                    Iniciar Sesión
                </button>
                <div id="loginError" class="error-message" style="display: none;"></div>
            </form>
        </div>
    </div>

    <!-- DASHBOARD PRINCIPAL -->
    <div class="dashboard" id="dashboard">
        <!-- Header -->
        <div class="dashboard-header">
            <div class="header-logo">
                <img src="img/Logo.png" alt="Logo">
                <span>PetZone Admin</span>
            </div>
            <div class="header-user">
                <div class="user-info">
                    <span class="user-name" id="userName">Administrador</span>
                    <span class="user-role">Principal</span>
                </div>
                <button class="logout-btn" onclick="logout()">
                    <span class="material-icons">logout</span>
                    Cerrar Sesión
                </button>
            </div>
        </div>

        <!-- Sidebar -->
        <nav class="dashboard-sidebar">
            <ul class="sidebar-menu">
                <li class="sidebar-item active" onclick="showSection('inicio')">
                    <span class="material-icons">dashboard</span>
                    <span>Dashboard</span>
                </li>
                <li class="sidebar-item" onclick="showSection('productos')">
                    <span class="material-icons">inventory_2</span>
                    <span>Gestión de Productos</span>
                </li>
                <li class="sidebar-item" onclick="showSection('sliders')">
                    <span class="material-icons">view_carousel</span>
                    <span>Sliders/Banners</span>
                </li>
                <li class="sidebar-item" onclick="showSection('anuncios')">
                    <span class="material-icons">campaign</span>
                    <span>Anuncios</span>
                </li>
            </ul>
        </nav>

        <!-- Contenido Principal -->
        <div class="dashboard-content">
            <!-- SECCIÓN INICIO -->
            <section class="panel-section active" id="section-inicio">
                <div class="section-header">
                    <h2 class="section-title">Dashboard Principal</h2>
                    <div class="date-info" id="currentDate"></div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <span class="material-icons">inventory_2</span>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalProductos">0</h3>
                            <p>Productos Totales</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <span class="material-icons">view_carousel</span>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalSliders">0</h3>
                            <p>Sliders Activos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon cyan">
                            <span class="material-icons">campaign</span>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalAnuncios">0</h3>
                            <p>Anuncios Activos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <span class="material-icons">shopping_bag</span>
                        </div>
                        <div class="stat-info">
                            <h3 id="pedidosHoy">0</h3>
                            <p>Pedidos Hoy</p>
                        </div>
                    </div>
                </div>

                <!-- GRÁFICOS  -->
                 <div id="test"></div>
                <div class="charts-section">
                    <h3 class="charts-title">Estadísticas y Análisis</h3>
                    <div class="charts-grid">
                        <!-- Gráfico 1: Productos por Categoría -->
                        <div class="chart-card">
                            <div id="chart-productos-categoria" class="chart-container">
                                <div class="chart-loading">
                                    <span class="material-icons rotating">donut_large</span>
                                    <p>Cargando gráfico...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Gráfico 2: Reservas por Servicio -->
                        <div class="chart-card">
                            <div id="chart-reservas-servicio" class="chart-container">
                                <div class="chart-loading">
                                    <span class="material-icons rotating">donut_large</span>
                                    <p>Cargando gráfico...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Gráfico 3: Ventas Mensuales -->
                        <div class="chart-card">
                            <div id="chart-ventas-mensuales" class="chart-container">
                                <div class="chart-loading">
                                    <span class="material-icons rotating">donut_large</span>
                                    <p>Cargando gráfico...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Gráfico 4: Productos Más Vendidos -->
                        <div class="chart-card">
                            <div id="chart-productos-vendidos" class="chart-container">
                                <div class="chart-loading">
                                    <span class="material-icons rotating">donut_large</span>
                                    <p>Cargando gráfico...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECCIÓN PRODUCTOS -->
            <section class="panel-section" id="section-productos">
                <div class="section-header">
                    <h2 class="section-title">Gestión de Productos</h2>
                    <div class="header-actions">
                        <div class="search-box">
                            <span class="material-icons">search</span>
                            <input type="text" id="searchProductos" placeholder="Buscar productos...">
                        </div>
                        <select id="filterCategoria" class="filter-select">
                            <option value="">Todas las categorías</option>
                        </select>
                        <button class="add-btn" onclick="showProductForm()">
                            <span class="material-icons">add</span>
                            Agregar Producto
                        </button>
                    </div>
                </div>

                <!-- Formulario de Productos -->
                <div class="form-modal" id="productFormModal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="productFormTitle">Nuevo Producto</h3>
                            <button class="close-btn" onclick="closeProductForm()">
                                <span class="material-icons">close</span>
                            </button>
                        </div>
                        <form id="productForm" enctype="multipart/form-data">
                            <input type="hidden" id="productId" name="id">
                            <div class="form-grid">
                                <div class="form-field">
                                    <label>Nombre del Producto *</label>
                                    <input type="text" id="productNombre" name="nombre" required>
                                </div>
                                <div class="form-field">
                                    <label>Categoría *</label>
                                    <select id="productCategoria" name="categoria_id" required>
                                        <option value="">Seleccionar...</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label>Precio (S/.) *</label>
                                    <input type="number" id="productPrecio" name="precio" step="0.01" min="0" required>
                                </div>
                                <div class="form-field">
                                    <label>Stock *</label>
                                    <input type="number" id="productStock" name="stock" min="0" required>
                                </div>
                                <div class="form-field">
                                    <label>SKU</label>
                                    <input type="text" id="productSku" name="codigo_sku">
                                </div>
                                <div class="form-field">
                                    <label>Destacado</label>
                                    <label class="switch">
                                        <input type="checkbox" id="productDestacado" name="destacado">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="form-field full-width">
                                <label>Descripción</label>
                                <textarea id="productDescripcion" name="descripcion" rows="4"></textarea>
                            </div>
                            <div class="form-field full-width">
                                <label>Imagen del Producto</label>
                                <div class="file-input-wrapper">
                                    <input type="file" id="productImagen" name="imagen" accept="image/*">
                                    <div class="image-preview" id="imagePreview"></div>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn-cancel" onclick="closeProductForm()">Cancelar</button>
                                <button type="submit" class="btn-save">
                                    <span class="material-icons">save</span>
                                    Guardar Producto
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Tabla de Productos -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Imagen</th>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Categoría</th>
                                <th>Precio</th>
                                <th>Stock</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="productosTableBody">
                            <tr>
                                <td colspan="8" class="loading">Cargando productos...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- SECCIÓN SLIDERS -->
            <section class="panel-section" id="section-sliders">
                <div class="section-header">
                    <h2 class="section-title">Gestión de Sliders/Banners</h2>
                    <button class="add-btn" onclick="showSliderForm()">
                        <span class="material-icons">add</span>
                        Agregar Slider
                    </button>
                </div>

                <!-- Formulario de Sliders -->
                <div class="form-modal" id="sliderFormModal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="sliderFormTitle">Nuevo Slider</h3>
                            <button class="close-btn" onclick="closeSliderForm()">
                                <span class="material-icons">close</span>
                            </button>
                        </div>
                        <form id="sliderForm" enctype="multipart/form-data">
                            <input type="hidden" id="sliderId" name="id">
                            <div class="form-grid">
                                <div class="form-field">
                                    <label>Título *</label>
                                    <input type="text" id="sliderTitulo" name="titulo" required>
                                </div>
                                <div class="form-field">
                                    <label>Posición *</label>
                                    <select id="sliderPosicion" name="posicion" required>
                                        <option value="principal">Principal</option>
                                        <option value="secundario">Secundario</option>
                                        <option value="lateral">Lateral</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label>Enlace (URL)</label>
                                    <input type="url" id="sliderEnlace" name="enlace">
                                </div>
                                <div class="form-field">
                                    <label>Orden</label>
                                    <input type="number" id="sliderOrden" name="orden" min="0" value="0">
                                </div>
                            </div>
                            <div class="form-field full-width">
                                <label>Descripción</label>
                                <textarea id="sliderDescripcion" name="descripcion" rows="3"></textarea>
                            </div>
                            <div class="form-field full-width">
                                <label>Imagen del Slider <span style="color: #999; font-size: 0.85rem;">(opcional al editar)</span></label>
                                <input type="file" id="sliderImagen" name="imagen" accept="image/*">
                                <div class="image-preview" id="sliderImagePreview"></div>
                            </div>
                            <div class="form-field">
                                <label>Estado</label>
                                <label class="switch">
                                    <input type="checkbox" id="sliderActivo" name="activo" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn-cancel" onclick="closeSliderForm()">Cancelar</button>
                                <button type="submit" class="btn-save">
                                    <span class="material-icons">save</span>
                                    Guardar Slider
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Grid de Sliders -->
                <div class="slider-grid" id="slidersGrid">
                    <div class="loading">Cargando sliders...</div>
                </div>
            </section>

            <!-- SECCIÓN ANUNCIOS -->
            <section class="panel-section" id="section-anuncios">
                <div class="section-header">
                    <h2 class="section-title">Gestión de Anuncios</h2>
                    <button class="add-btn" onclick="showAnuncioForm()">
                        <span class="material-icons">add</span>
                        Crear Anuncio
                    </button>
                </div>

                <!-- Formulario de Anuncios -->
                <div class="form-modal" id="anuncioFormModal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="anuncioFormTitle">Nuevo Anuncio</h3>
                            <button class="close-btn" onclick="closeAnuncioForm()">
                                <span class="material-icons">close</span>
                            </button>
                        </div>
                        <form id="anuncioForm">
                            <input type="hidden" id="anuncioId" name="id">
                            <div class="form-grid">
                                <div class="form-field">
                                    <label>Tipo *</label>
                                    <select id="anuncioTipo" name="tipo" required>
                                        <option value="promocion">Promoción</option>
                                        <option value="aviso_general">Aviso General</option>
                                        <option value="evento">Evento</option>
                                        <option value="urgente">Urgente</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label>Color de Fondo</label>
                                    <input type="color" id="anuncioColorFondo" name="color_fondo" value="#23906F">
                                </div>
                                <div class="form-field">
                                    <label>Color de Texto</label>
                                    <input type="color" id="anuncioColorTexto" name="color_texto" value="#FFFFFF">
                                </div>
                                <div class="form-field">
                                    <label>Velocidad (segundos)</label>
                                    <input type="number" id="anuncioVelocidad" name="velocidad" min="10" max="60"
                                        value="30">
                                </div>
                                <div class="form-field">
                                    <label>Icono (Material Icons)</label>
                                    <input type="text" id="anuncioIcono" name="icono" placeholder="ej: local_offer">
                                </div>
                                <div class="form-field">
                                    <label>Prioridad</label>
                                    <input type="number" id="anuncioPrioridad" name="prioridad" min="0" value="0">
                                </div>
                            </div>
                            <div class="form-field full-width">
                                <label>Mensaje del Anuncio *</label>
                                <textarea id="anuncioMensaje" name="mensaje" rows="3" required></textarea>
                            </div>
                            <div class="form-field">
                                <label>Estado</label>
                                <label class="switch">
                                    <input type="checkbox" id="anuncioActivo" name="activo" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn-cancel" onclick="closeAnuncioForm()">Cancelar</button>
                                <button type="submit" class="btn-save">
                                    <span class="material-icons">save</span>
                                    Guardar Anuncio
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Lista de Anuncios -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Mensaje</th>
                                <th>Tipo</th>
                                <th>Prioridad</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="anunciosTableBody">
                            <tr>
                                <td colspan="6" class="loading">Cargando anuncios...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast" class="toast"></div>
    <script src="js/charts.js" defer></script>
    <script src="js/dashboard.js" defer></script>
</body>

</html>
